{"name":"Toggle Torch","type":"script","author":"RwQQFAbeZEXH9J8B","img":"icons/sundries/lights/torch-brown-lit.webp","scope":"global","command":"if (token.data.light.dim === 0) {\n    await token.document.update({\n        light: {\n            alpha: 0.3,\n            angle: 0,\n            bright: 20,\n            coloration: 1,\n            dim: 40,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0,\n            shadows: 0,\n            animation: {\n                speed: 1,\n                intensity: 2,\n                reverse: false,\n                type: \"torch\",\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n            color: \"#ffb900\",\n        },\n    });\n} else {\n    await token.document.update({\n        light: {\n            alpha: 0.5,\n            angle: 0,\n            bright: 0,\n            color: \"#000000\",\n            coloration: 1,\n            dim: 0,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0,\n            shadows: 0,\n            animation: {\n                speed: 5,\n                intensity: 5,\n                reverse: false,\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n        },\n    });\n}\ntoken.toggleEffect('icons/sundries/lights/torch-brown-lit.webp');","folder":null,"sort":0,"permission":{"default":0,"RwQQFAbeZEXH9J8B":3},"flags":{"core":{"sourceId":"Macro.Bv125GuxtgMLzvOt"}},"_id":"750mQI6VDmuzoHIC"}
{"name":"Checkmaker.js","type":"script","scope":"global","author":"ztvmi1o6YUITPdRl","img":"icons/magic/symbols/fleur-de-lis-yellow.webp","command":"const inputDialog = new Dialog({\n    title: \"Inline Check Generator\",\n    content: `\n    <html>\n    <head>\n        <datalist id=\"actionsList\">\n            <option value=\"action:search\">Search</option>  \n            <option value=\"action:seek\">Seek</option>  \n            <option value=\"action:track\">Track</option>   \n            <option value=\"action:recall-knowledge\">Recall Knowledge</option>   \n            <option value=\"action:identify-magic\">Identify Magic</option>   \n            <option value=\"action:balance\">Balance</option>    \n            <option value=\"action:climb\">Climb</option>  \n            <option value=\"action:long-jump\">Long Jump</option>           \n            <option value=\"action:squeeze\">Squeeze</option>      \n            <option value=\"action:swim\">Swim</option>\n            <option value=\"action:avoid-notice\">Avoid Notice</option>    \n            <option value=\"action:disable-device\">Disable a Device</option>  \n            <option value=\"action:pick-a-lock\">Pick a Lock</option>\n            <option value=\"action:make-an-impression\">Make an impression</option>    \n            <option value=\"action:coerce\">Coerce</option>  \n        </datalist>\n        <datalist id=\"defaultNumbers\">\n            <option value=\"5\"></option>\n            <option value=\"10\"></option>\n            <option value=\"15\"></option>\n            <option value=\"20\"></option>\n            <option value=\"25\"></option>\n            <option value=\"30\"></option>\n            <option value=\"35\"></option>\n            <option value=\"40\"></option>\n        </datalist>\n        <datalist id=\"checkTypes\">\n        <option disabled>Special Checks</option> \n            <option value=\"perception\" selected>Perception</option>  \n            <option value=\"flat\">Flat</option>   \n        <option disabled>Special Checks</option> \n            <option value=\"fortitude\">Fortitude</option>    \n            <option value=\"reflex\">Reflex</option>    \n            <option value=\"will\">Will</option>     \n        <option disabled>Special Checks</option>  \n            <option value=\"acrobatics\">Acrobatics</option>    \n            <option value=\"arcana\">Arcana</option>    \n            <option value=\"athletics\">Athletics</option>    \n            <option value=\"crafting\">Crafting</option>    \n            <option value=\"deception\">Deception</option>    \n            <option value=\"diplomacy\">Diplomacy</option>    \n            <option value=\"intimidation\">Intimidation</option>    \n            <option value=\"medicine\">Medicine</option>    \n            <option value=\"nature\">Nature</option>    \n            <option value=\"occultism\">Occultism</option>    \n            <option value=\"performance\">Performance</option>    \n            <option value=\"religion\">Religion</option>    \n            <option value=\"society\">Society</option>    \n            <option value=\"stealth\">Stealth</option>    \n            <option value=\"survival\">Survival</option>    \n            <option value=\"lhievery\">Thievery</option>    \n        </datalist>\n        <!-- If we needed to add other traits, but we probably don't?\n        <datalist id=\"traitslist\" name=\"traitslist\">\n            <option value=\"auditory\">Auditory</option>  \n            <option value=\"concentrate\">Concentrate</option>  \n            <option value=\"manipulate\">Manipulate</option>   \n        </datalist>\n        -->\n    <style>\n        input#DC {\n            width: 3rem;\n        }\n        input#label, input[type=search] {\n            width: 85%;\n        }\n        fieldset {\n            display: block;\n            line-height: 2rem;\n\n        }\n        form section, form div {\n            display: flex;\n            justify-content: space-between;\n            align-items: center \n        }\n        label {\n            padding-right: 0.5rem;\n        }\n        div.dialog-buttons {\n            margin-top: 8px\n        }\n    </style>\n    </head>\n    <body>\n    <form>\n        <fieldset><legend>Check parameters:</legend>\n            <section>\n                <div><label for=\"type\">Type: </label><input type=\"search\" list=\"checkTypes\" id=\"type\" name=\"type\" placeholder=\"Check type\" required /></div>\n                <div><label for=\"DC\">DC: </label><input type=\"number\" id=\"DC\" name=\"DC\" list=\"defaultNumbers\" required /></div>\n                <div><label for=\"basic\">Basic?</label><input type=\"checkbox\" id=\"basic\" name=\"basic\" /></div>\n            </section>\n            <div><label for=\"label\">Label: </label><input id=\"label\" name=\"label\" type=\"text\" placeholder=\"Optional label override\" /></div>\n        </fieldset>\n        <fieldset id=\"traits\"><legend>Traits:</legend>\n            <div><label for=\"action\">Action: </label><input type=\"search\" list=\"actionsList\" placeholder=\"Add the action's trait, if one applies\" id=\"action\" /></div>\n            <section>\n                <div><label for=\"damaging\"><i class=\"fas fa-bomb\"></i> Damaging effect:</label><input type=\"checkbox\" id=\"damaging\" name=\"damaging\" value=\"damaging-effect\" /></div>\n                <div><label for=\"secret\"><i class=\"fas fa-eye\"></i> Secret:</label><input type=\"checkbox\" id=\"secret\" name=\"secret\" /></div>\n            </section>\n        </fieldset>\n        <!-- \n        <button type=\"submit\"><i class=\"fas fa-check\"> </i>Generate Check</button>\n        <button type=\"reset\"><i class=\"fas fa-recycle\"></i> Reset Form</button>\n        -->\n    </form>\n    </body>\n    </html>\n    `,\n    buttons: {\n        generate: {\n        label: \"Generate Check\",\n        callback: (html) => generateCheck(html),\n        icon: `<i class=\"fas fa-check\"></i>`\n        }\n    }\n}).render(true);\n\nasync function generateCheck(html) {\n\n    // set up empty default variables\n    let checkvar = \"\";\n    let checktrt = \"\";\n    let checkopt = \"\";\n\n    // Import all the bits\n    let type = html.find(\"#type\").val();\n    let DC = html.find(\"#DC\").val();\n    let basic = html.find(\"#basic\").is(\":checked\");\n    let label = html.find(\"#label\").val();\n    let action = html.find(\"#action\").val();\n    let damaging = html.find(\"#damaging\").is(\":checked\");\n    let secret = html.find(\"#secret\").is(\":checked\");    \n\n    // Debug / validation steps\n        // Apparently I can't set required fields without a custom application but this is the next best thing\n        if (DC == false) {\n            ui.notifications.error('No DC was set!');\n        };\n        if (type == false) {\n        ui.notifications.error('No type was set!');\n        };\n        // Log form contents to debug calculations\n        console.log(\"Form sent with the following data- type:\" + type + \" DC:\" + DC + \" action:\" + action + \" secret:\" + secret + \" basic:\" + basic + \" label:\" + label);\n\n    // Convert easy bits for concat\n        if (basic) {\n            console.log(\"Check is basic\");\n            basic = \"|basic:true\";\n            } else {\n            console.log(\"Check is not basic\");\n            basic = \"\";\n            };\n        if (label){\n            label = \"{\" + label + \"}\";\n            console.log(\"Custom label set: \" + label);\n            } else {\n            label = \"\";\n            console.log(\"No custom label was defined\")\n            };\n        checkvar = \"@Check[type:\" + type + \"|dc:\" + DC;\n        checkopt = basic + \"]\" + label; \n\n    // Resolve traits\n        if (damaging || secret || action) {\n            if (damaging) {\n                if (action || secret) {\n                    damaging = \",damaging-effect\";\n                } else damaging = \"damaging-effect\";\n            } else {\n                damaging = \"\";\n            };\n            if (secret) {\n                if (action){\n                    secret = \",secret\";\n                } else {\n                    secret = \"secret\";\n                }\n            } else {\n                secret = \"\";\n            }; \n            checktrt = \"|traits:\" + action + secret + damaging;\n        }\n    \n    // Final concat\n    check = checkvar + checktrt + checkopt;\n   \n    // Copy results to clipboard\n    await navigator.clipboard.writeText(check).then(\n        function() {\n            ui.notifications.info(\"Button \" + check + \" copied to clipboard\");\n        }, function(err) {\n            ui.notifications.error('Async: Could not copy text: ', err);\n        }\n    );\n\n}","ownership":{"default":0,"ztvmi1o6YUITPdRl":3},"flags":{"core":{"sourceId":"Macro.cPIH2F8FNdL5IBk9"}},"_stats":{"systemId":"pf2e","systemVersion":"4.7.4","coreVersion":"10.291","createdTime":1675530480354,"modifiedTime":1677271461372,"lastModifiedBy":"ztvmi1o6YUITPdRl"},"folder":null,"sort":0,"_id":"Fh7teOHsB8HcnjRb"}
{"name":"Toggle Light","type":"script","author":"RwQQFAbeZEXH9J8B","img":"systems/pf2e/icons/spells/light.webp","scope":"global","command":"if (token.data.light.dim === 0) {\n    await token.document.update({\n        light: {\n            alpha: 0.3,\n            angle: 0,\n            bright: 20,\n            coloration: 1,\n            dim: 40,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0,\n            shadows: 0,\n            animation: {\n                speed: 0.5,\n                intensity: 2,\n                reverse: false,\n                type: \"black hole\",\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n            color: \"#000000\",\n        },\n    });\n} else {\n    await token.document.update({\n        light: {\n            alpha: 0.5,\n            angle: 0,\n            bright: 0,\n            color: \"#000000\",\n            coloration: 1,\n            dim: 0,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0,\n            shadows: 0,\n            animation: {\n                speed: 5,\n                intensity: 5,\n                reverse: false,\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n        },\n    });\n}\ntoken.toggleEffect('systems/pf2e/icons/spells/light.webp');","folder":null,"sort":0,"permission":{"default":0,"RwQQFAbeZEXH9J8B":3},"flags":{"core":{"sourceId":"Macro.91ppDblAH5KMldp7"}},"_id":"Gj4poOKdx80NM79g"}
{"name":"Toggle Bullseye Lantern","type":"script","author":"RwQQFAbeZEXH9J8B","img":"icons/sundries/lights/lantern-bullseye-signal-copper.webp","scope":"global","command":"if (token.data.light.dim === 0) {\n    await token.document.update({\n        light: {\n            alpha: 0.3,\n            angle: 60,\n            bright: 60,\n            coloration: 1,\n            dim: 120,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0,\n            shadows: 0,\n            animation: {\n                speed: 0.5,\n                intensity: 2,\n                reverse: false,\n                type: \"torch\",\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n            color: \"#ffb900\",\n        },\n    });\n} else {\n    await token.document.update({\n        light: {\n            alpha: 0.5,\n            angle: 0,\n            bright: 0,\n            color: \"#000000\",\n            coloration: 1,\n            dim: 0,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0,\n            shadows: 0,\n            animation: {\n                speed: 5,\n                intensity: 5,\n                reverse: false,\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n        },\n    });\n}\ntoken.toggleEffect('icons/sundries/lights/lantern-bullseye-signal-copper.webp');","folder":null,"sort":0,"permission":{"default":0,"RwQQFAbeZEXH9J8B":3},"flags":{"core":{"sourceId":"Macro.50sVPXCQsukHoMmq"}},"_id":"MBAA54FjKVO8mq3L"}
{"name":"Show Token Art","type":"script","author":"RwQQFAbeZEXH9J8B","img":"icons/tools/scribal/magnifying-glass.webp","scope":"global","command":"if (!token) {\n    ui.notifications.error(\"No token selected!\");\n} else {\n    const popout = new ImagePopout(token.actor.data.img, {\n        title: token.name,\n        shareable: true,\n        uuid: token.actor.uuid\n    })\n    popout.render(true);\n    popout.shareImage();\n}","folder":null,"sort":0,"permission":{"default":0,"RwQQFAbeZEXH9J8B":3},"flags":{"core":{"sourceId":"Macro.ywsDeLrEZgzuOCQK"}},"_id":"OGi1hzily0g8jGRC"}
{"name":"Exploration Activities","type":"script","author":"RwQQFAbeZEXH9J8B","img":"icons/magic/symbols/question-stone-yellow.webp","scope":"global","command":"game.packs.get(\"pf2e-exploration-effects.exploration-effects\").render(true)","folder":null,"sort":0,"permission":{"default":0,"RwQQFAbeZEXH9J8B":3},"flags":{"core":{"sourceId":"Macro.95tOahEZk5PSGuSs"}},"_id":"YuW9X9rGxHY9g0OO"}
{"name":"Toggle Light (Upcast)","type":"script","author":"RwQQFAbeZEXH9J8B","img":"systems/pf2e/icons/spells/light.webp","scope":"global","command":"if (token.data.light.dim === 0) {\n    await token.document.update({\n        light: {\n            alpha: 0.3,\n            angle: 0,\n            bright: 60,\n            coloration: 1,\n            dim: 120,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0,\n            shadows: 0,\n            animation: {\n                speed: 0.5,\n                intensity: 2,\n                reverse: false,\n                type: \"black hole\",\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n            color: \"#000000\",\n        },\n    });\n} else {\n    await token.document.update({\n        light: {\n            alpha: 0.5,\n            angle: 0,\n            bright: 0,\n            color: \"#000000\",\n            coloration: 1,\n            dim: 0,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0,\n            shadows: 0,\n            animation: {\n                speed: 5,\n                intensity: 5,\n                reverse: false,\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n        },\n    });\n}\ntoken.toggleEffect('systems/pf2e/icons/spells/light.webp');","folder":null,"sort":0,"permission":{"default":0,"RwQQFAbeZEXH9J8B":3},"flags":{"core":{"sourceId":"Macro.y1fUGtlUyWFoeGeO"}},"_id":"fqXD731a022ye1TP"}
{"name":"Toggle Hooded Lantern","type":"script","author":"RwQQFAbeZEXH9J8B","img":"icons/sundries/lights/lantern-bullseye-signal-copper.webp","scope":"global","command":"if (token.data.light.dim === 0) {\n    await token.document.update({\n        light: {\n            alpha: 0.3,\n            angle: 0,\n            bright: 30,\n            coloration: 1,\n            dim: 60,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0,\n            shadows: 0,\n            animation: {\n                speed: 0.5,\n                intensity: 2,\n                reverse: false,\n                type: \"torch\",\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n            color: \"#ffb900\",\n        },\n    });\n} else {\n    await token.document.update({\n        light: {\n            alpha: 0.5,\n            angle: 0,\n            bright: 0,\n            color: \"#000000\",\n            coloration: 1,\n            dim: 0,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0,\n            shadows: 0,\n            animation: {\n                speed: 5,\n                intensity: 5,\n                reverse: false,\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n        },\n    });\n}\ntoken.toggleEffect('icons/sundries/lights/lantern-bullseye-signal-copper.webp');","folder":null,"sort":0,"permission":{"default":0,"RwQQFAbeZEXH9J8B":3},"flags":{"core":{"sourceId":"Macro.Y319UqjCabKlJrOX"}},"_id":"rlQHIUVeAX4eDWjx"}
{"name":"Toggle Sunrod","type":"script","author":"RwQQFAbeZEXH9J8B","img":"systems/pf2e/icons/equipment/alchemical-items/alchemical-tools/sunrod.webp","scope":"global","command":"if (token.data.light.dim === 0) {\n    await token.document.update({\n        light: {\n            alpha: 0.3,\n            angle: 0,\n            bright: 20,\n            coloration: 2,\n            dim: 40,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0,\n            shadows: 0,\n            animation: {\n                speed: 4,\n                intensity: 3,\n                reverse: false,\n                type: \"torch\",\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n            color: \"#ffb900\",\n        },\n    });\n} else {\n    await token.document.update({\n        light: {\n            alpha: 0.5,\n            angle: 0,\n            bright: 0,\n            color: \"#000000\",\n            coloration: 1,\n            dim: 0,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0,\n            shadows: 0,\n            animation: {\n                speed: 5,\n                intensity: 5,\n                reverse: false,\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n        },\n    });\n}\ntoken.toggleEffect('systems/pf2e/icons/equipment/alchemical-items/alchemical-tools/sunrod.webp');","folder":null,"sort":0,"permission":{"default":0,"RwQQFAbeZEXH9J8B":3},"flags":{"core":{"sourceId":"Macro.BYx4MTXWgK4CEW7H"}},"_id":"ulJjImoog0QN7Gml"}
